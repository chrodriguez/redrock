<h2>Crea tu cuenta</h2>

<%
  child_class_name = @user_type.downcase.camelize
  resource.profile = child_class_name.constantize.new if resource.profile.nil?
%>

<%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), method: :post, defaults: { input_html: { class: 'form-control' }}) do |f| %>

  <% if resource.errors.any? %>
   <div>
     <%= devise_error_messages! %>
   </div>
  <% end %>

    <%= f.input :email, required: true, autofocus: true, input_html: { autocomplete: "email" }%>
    <%= f.input :username %>
    <%= f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length),
                input_html: { autocomplete: "new-password" } %>
    <%= f.input :password_confirmation, required: true, input_html: { autocomplete: "new-password" } %>

    <%= f.simple_fields_for resource.profile do |p| %>
      <% render :partial => "#{child_class_name.underscore}_fields", :locals => { :f => p } %>
    <% end %>

    <%= f.hidden_field :user_type, :value => @user_type %>

    <div class="actions">
      <%= f.submit "Registrarse" %>
    </div>

<% end %>

<%= render "devise/shared/links" %>
